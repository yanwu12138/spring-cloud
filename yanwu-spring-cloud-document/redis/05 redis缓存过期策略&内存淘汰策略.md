#### 缓存过期策略

redis过期策略分为三种：定时删除、惰性删除、定期删除

- 定时删除：在设置过期时间时，redis会同步生成一个定时器，等定时器时间到了自动删除对应的数据
- 惰性删除：设置过期时间后，只会在你访问到数据的时候判断数据是否过期，如果过期，则将数据删除，如果数据没过期，则进行访问
- 定期删除：设置过期时间后，每隔一段时间轮询一次数据是否过期，如果过期，则将数据删除

| 策略     | 优点                                                         | 缺点                                                         |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 定时删除 | 能够保证内存尽快地被释放掉                                   | 1.如果同一时间大批量数据过期，会同时进行数据删除占用CPU，导致阻塞<br>2.每设置一个过期时间，都要生成一个定时器，影响性能 |
| 惰性删除 | 删除操作只发生在从数据库取数据的时候，而且只对该K进行操作，所以对CPU的占比较小 | 如果大量的数据过期后没有去访问，可能会导致内存泄露（垃圾数据过多） |
| 定期删除 | 1.解决定时删除的CPU占用问题和性能问题<br>2.解决惰性删除的内存泄漏问题 | 在内存友好方面不如定时删除，在CPU时间友好方面不如惰性删除    |



#### 内存淘汰策略

redis的内存淘汰策略是指在redis的用于缓存的内存不足时，怎么处理需要写入且申请额外空间的数据

| 策略            | 说明                                                         |
| --------------- | ------------------------------------------------------------ |
| noeviction      | 当内存不足时，新写入操作会报错                               |
| allkeys-lru     | 当内存不足时，在键空间中，移除最近最少使用的K                |
| allkeys-random  | 当内存不足时，在键空间中，随机移除K                          |
| volatile-lru    | 当内存不足时，在设置了过期时间的键空间中，移除最近最少使用的K |
| volatile-random | 当内存不足时，在是指了过期时间的键空间中，随机移除K          |
| volatile-ttl    | 当内存不足据时，在设置了过期时间的键空间中，优先移除更早过期时间的K |

